<?xml version="1.0" encoding="UTF-8"?>
<endpoints xmlns="http://java.sun.com/xml/ns/jax-ws/ri/runtime" version="2.0">
<%
  repository.data_modules.each do |data_module|
    data_module.services.select{|s| s.jws?}.each do |service|
-%>
  <endpoint name="<%= service.jws.service_name %>" implementation="<%= service.jws.qualified_boundary_implementation_name %>" url-pattern="<%= service.jws.url %>"/>
<%
    end
  end
-%>
<!--
  The following fragment should be added to the web.xml to ensure the above endpoints are correctly exposed;

<listener>
  <listener-class>com.sun.xml.ws.transport.http.servlet.WSServletContextListener</listener-class>
</listener>
<servlet>
  <servlet-name>WSServlet</servlet-name>
  <servlet-class>com.sun.xml.ws.transport.http.servlet.WSServlet</servlet-class>
  <load-on-startup>1</load-on-startup>
</servlet>
<%
  repository.data_modules.each do |data_module|
    data_module.services.select{|s| s.jws?}.each do |service|
-%>
<servlet-mapping>
  <servlet-name>WSServlet</servlet-name>
  <url-pattern><%= service.jws.url %></url-pattern>
</servlet-mapping>
<%
    end
  end
-%>

-->
</endpoints>
